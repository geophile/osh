<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>osh.command.agg</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="osh-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://geophile.com/osh">osh</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="osh-module.html">Package&nbsp;osh</a> ::
        <a href="osh.command-module.html">Package&nbsp;command</a> ::
        Module&nbsp;agg
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="osh.command.agg-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module agg</h1><p class="nomargin-top"><span class="codelink"><a href="osh.command.agg-pysrc.html">source&nbsp;code</a></span></p>
<p><code>agg [-r] [[-g|-c] GROUPING_FUNCTION] INITIAL_VALUE 
  AGGREGATION_FUNCTION</code></p>
  <p>Aggregates objects from the input stream. If 
  <code>GROUPING_FUNCTION</code> is omitted, then one output object is 
  generated by initializing an accumulator to <code>INITIAL_VALUE</code> 
  and then combining the accumulator with input objects using 
  <code>AGGREGATION_FUNCTION</code>. <code>AGGREGATION_FUNCTION</code> 
  takes two inputs, the current value of the accumulator and an object from
  the input stream.</p>
  <p>Example: If the input objects are integers <code>1, 2, 3</code>, then 
  the sum of the integers is computed as follows:</p>
<pre class="literalblock">
   ... ^ agg 0 'sum, x: sum + x'
</pre>
  <p>which yields <code>(6,)</code>.</p>
  <p>If <code>GROUPING_FUNCTION</code> is specified, then a set of 
  accumulators is maintained, one for each value of 
  <code>GROUPING_FUNCTION</code>. Each output object is a tuple with two 
  parts, the group value and the accumulated value for the group.</p>
  <p>Example: If the input objects are <code>('a', 1), ('a', 2), ('b', 3), 
  ('b', 4)</code>, then the sum of ints for each string is computed as 
  follows:</p>
<pre class="literalblock">
   ... ^ agg -g 'x, y: x' 0 'sum, x, y: sum + y'
</pre>
  <p>which yields <code>('a', 3), ('b', 7)</code>.</p>
  <p>If the grouping function is specified with the <code>-g</code> flag, 
  then agg generates its output when the input stream has ended. (It has 
  to, because group members map appear in any order.) In some situations 
  however, group members appear consecutively, and it is useful to get 
  output earlier. If group members are known to be consecutive, then the 
  group function can be specified using the <code>-c</code> flag.</p>
  <p>If the <code>-r</code> flag is specified, then one output object is 
  generated for each input object; the output object contains the value of 
  the accumulator so far. The accumulator appears in the output row before 
  the inputs. For example, if the input stream contains <code>1, 2, 
  3</code>, then the running total can be computed as follows:</p>
<pre class="literalblock">
   ... ^ agg -r 0 'sum, x: sum + x' ^ ...
</pre>
  <p>The output stream would be <code>(1, 1), (3, 2), (6, 3)</code>. In the
  last output object, <code>6</code> is the sum of the current input 
  (<code>3</code>) and all preceding inputs (<code>1, 2</code>).</p>
  <p>The <code>-r</code> flag can also be used with grouping. For example, 
  if the input objects are <code>('a', 1), ('a', 2), ('b', 3), ('b', 
  4)</code>, then the running totals for the strings would be computed as 
  follows:</p>
<pre class="literalblock">
   ... ^ agg -r -g 'x, y: x' 0 'sum, x, y: sum + y' ^ ...
</pre>
  <p>The output stream would be <code>(1, 'a', 1), (3, 'a', 2), (3, 'b', 
  3), (7, 'b', 4)</code>. I.e., the running total is reinitialized to 0 for
  each group.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="osh.command.agg-module.html#agg" class="summary-sig-name">agg</a>(<span class="summary-sig-arg">initial_value</span>,
        <span class="summary-sig-arg">aggregator</span>,
        <span class="summary-sig-arg">group</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">consecutive</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">running</span>=<span class="summary-sig-default">False</span>)</span><br />
      Combine inputs into a smaller number of outputs.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="osh.command.agg-pysrc.html#agg">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'osh.command'"><code class="variable-quote">'</code><code class="variable-string">osh.command</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Function Details</span></td>
</tr>
</table>
<a name="agg"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">agg</span>(<span class="sig-arg">initial_value</span>,
        <span class="sig-arg">aggregator</span>,
        <span class="sig-arg">group</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">consecutive</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">running</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="osh.command.agg-pysrc.html#agg">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Combine inputs into a smaller number of outputs. If neither 
  <code>group</code> nor <code>consecutive</code> is specified, then there 
  is one accumulator, initialized to <code>initial_value</code>. The 
  <code>aggregator</code> function is used to combine the current value of 
  the accumulator with the input to yield the next value of the 
  accumulator. The arguments to <code>aggregator</code> are the elements of
  the accumulator followed by the elements of one piece of input. If 
  <code>group</code> is specified, then there is one accumulator for each 
  group value, defined by applying the function <code>group</code> to each 
  input. <code>consecutive</code> is just like <code>group</code> except 
  that it is assumed that group values are adjacent in the input sequence. 
  At most one of <code>group</code> and <code>consecutive</code> may be 
  specified. If <code>running</code> is <code>false</code>, then output 
  contains one object per group, containing the aggregate value. (If 
  neither <code>group</code> nor <code>consecutive</code> are provided, 
  then there is just one group, representing the aggregate for the entire 
  input stream.) If <code>running</code> is true, then each the aggregate 
  value for the group is written out with each input object -- i.e., the 
  output contains &quot;running totals&quot;. In this case, the aggregate 
  values appear before the input values in the output object.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="osh-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://geophile.com/osh">osh</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Jan 30 23:17:38 2013
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
